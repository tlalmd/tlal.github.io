<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Blog – Trisha Lal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a94d6cda5859b2e9deaa62939a4bd03e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="../site_libs/kePrint-0.0.1/kePrint.js"></script><link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../img/eras.jpg" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Trisha Lal</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../projects/index.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cv/index.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../blog/index.html" aria-current="page"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../dashboard/dashboard.html"> 
<span class="menu-text">Dashboard</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://x.com/med_trisha"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/trisha-lal-42b5a0187/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:trisha.lal@uhhospitals.org"> <i class="bi bi-envelope" role="img" aria-label="email">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Blog</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="welcome-to-the-blog" class="level2"><h2 class="anchored" data-anchor-id="welcome-to-the-blog">Welcome to the Blog</h2>
<p>This blog contains a study report for Studies 1 and 2 for Project B. Given my interest in cancer, I mostly chose to include variables that are cancer relevant in my analysis.</p>
</section><section id="study-1" class="level2"><h2 class="anchored" data-anchor-id="study-1">Study 1</h2>
<p><strong>Analysis A: Does smoking influence HDL cholesterol levels?</strong></p>
<p>The paired <strong>variables</strong> I chose to compare are HDL cholesterol (LBDHDD, measured in mg/dL) in smokers from the 2017-2020 NHANES dataset with those who stopped smoking in the 2021-2024 NHANES dataset.</p>
<p>The <strong>null hypothesis</strong> for this analysis is that there is no difference in mean HDL cholesterol levels between smokers (2017-2020) and non-smokers (2021-2023). The <strong>alternative hypothesis</strong> is that there is a difference in between HDL cholesterol levels between smokers (2017-2020) and non-smokers (2021-2023).</p>
<p>Existing research indicates that smoking tends to lower HDL cholesterol levels, which is often referred to as “good” cholesterol. Low HDL cholesterol levels have been associated with increased oxidative stress and inflammation, both of which drive carcinogenesis. By running this paired analysis, we can explore whether smoking is associated with significant changes in “good cholesterol” across these groups.</p>
<p>In order to run the analysis, I first extracted data from NHANES and merged it into one table that contains only the relevant variables.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># 2017-2020</span></span>
<span><span class="va">hdl</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/HDL_L.xpt"</span><span class="op">)</span></span>
<span><span class="va">smoking</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/SMQ_L.xpt"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2021-2023</span></span>
<span><span class="va">hdl2</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/P_HDL.xpt"</span><span class="op">)</span></span>
<span><span class="va">smoking2</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/P_SMQ.xpt"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">smokers_old</span> <span class="op">&lt;-</span> <span class="va">hdl</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">inner_join</span><span class="op">(</span><span class="va">smoking</span>, by <span class="op">=</span> <span class="st">"SEQN"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">SMQ020</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">LBDHDD</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">LBDHDD</span>, <span class="va">SMQ020</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nonsmokers_new</span> <span class="op">&lt;-</span> <span class="va">hdl2</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">inner_join</span><span class="op">(</span><span class="va">smoking2</span>, by <span class="op">=</span> <span class="st">"SEQN"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">SMQ020</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">LBDHDD</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">LBDHDD</span>, <span class="va">SMQ020</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">smokers_old</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      SEQN            LBDHDD           SMQ020 
 Min.   :130378   Min.   : 22.00   Min.   :1  
 1st Qu.:133382   1st Qu.: 42.00   1st Qu.:1  
 Median :136473   Median : 51.00   Median :1  
 Mean   :136402   Mean   : 53.36   Mean   :1  
 3rd Qu.:139386   3rd Qu.: 61.00   3rd Qu.:1  
 Max.   :142310   Max.   :138.00   Max.   :1  </code></pre>
</div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">nonsmokers_new</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      SEQN            LBDHDD           SMQ020 
 Min.   :109266   Min.   :  5.00   Min.   :2  
 1st Qu.:113201   1st Qu.: 43.00   1st Qu.:2  
 Median :116955   Median : 52.00   Median :2  
 Mean   :117026   Mean   : 54.04   Mean   :2  
 3rd Qu.:120885   3rd Qu.: 62.00   3rd Qu.:2  
 Max.   :124822   Max.   :141.00   Max.   :2  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">smokers_old</span> <span class="op">&lt;-</span> <span class="va">smokers_old</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Group <span class="op">=</span> <span class="st">"Smokers"</span><span class="op">)</span></span>
<span><span class="va">nonsmokers_new</span> <span class="op">&lt;-</span> <span class="va">nonsmokers_new</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Group <span class="op">=</span> <span class="st">"Nonsmokers"</span><span class="op">)</span></span>
<span><span class="va">combined</span> <span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span><span class="va">smokers_old</span>, <span class="va">nonsmokers_new</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">combined</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7,200 × 4
     SEQN LBDHDD SMQ020 Group  
    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  
 1 130378     45      1 Smokers
 2 130379     60      1 Smokers
 3 130386     46      1 Smokers
 4 130391     41      1 Smokers
 5 130396     68      1 Smokers
 6 130406     37      1 Smokers
 7 130407     81      1 Smokers
 8 130408     82      1 Smokers
 9 130415     43      1 Smokers
10 130437     37      1 Smokers
# ℹ 7,190 more rows</code></pre>
</div>
</div>
<p>These summary statistics reveal that the mean HDL cholesterol is slightly higher in non-smokers (54.04) compared to smokers (53.36). The median values for both groups (smokers: 51 mg/dL, non-smokers: 52 mg/dL) are slightly different as well.</p>
<p>In order to determine which method I wanted to use to build a confidence interval for the population mean difference, I decided to first assess normality by building a histogram and Q-Q plot of the differences between the two groups.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/qqnorm.html">qqnorm</a></span><span class="op">(</span><span class="va">combined</span><span class="op">$</span><span class="va">LBDHDD</span>, main <span class="op">=</span> <span class="st">"QQ Plot: HDL Cholesterol Levels"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/qqnorm.html">qqline</a></span><span class="op">(</span><span class="va">combined</span><span class="op">$</span><span class="va">LBDHDD</span>, col <span class="op">=</span> <span class="st">"coral"</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">combined</span><span class="op">$</span><span class="va">LBDHDD</span>,</span>
<span>     breaks <span class="op">=</span> <span class="fl">30</span>,</span>
<span>     col <span class="op">=</span> <span class="st">"coral"</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Histogram: HDL Cholesterol Levels"</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"HDL Cholesterol (mg/dL)"</span>,</span>
<span>     border <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Because the data is <strong>right-skewed and not normally distributed</strong>, I chose to proceed with the bootstrap approach to estimate a confidence interval for the population mean difference between the two groups.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">group_means</span> <span class="op">&lt;-</span> <span class="va">combined</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">Group</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_HDL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">LBDHDD</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">mean_difference</span> <span class="op">&lt;-</span> <span class="va">group_means</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>difference <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html">diff</a></span><span class="op">(</span><span class="va">mean_HDL</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">difference</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">mean_difference</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.6784084</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://hbiostat.org/R/Hmisc/">Hmisc</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'Hmisc'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:dplyr':

    src, summarize</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    format.pval, units</code></pre>
</div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">smokers_HDL</span> <span class="op">&lt;-</span> <span class="va">combined</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Group</span> <span class="op">==</span> <span class="st">"Smokers"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">LBDHDD</span><span class="op">)</span></span>
<span><span class="va">nonsmokers_HDL</span> <span class="op">&lt;-</span> <span class="va">combined</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Group</span> <span class="op">==</span> <span class="st">"Nonsmokers"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">pull</span><span class="op">(</span><span class="va">LBDHDD</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">bootstrap_ci</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Hmisc/man/smean.sd.html">smean.cl.boot</a></span><span class="op">(</span><span class="va">smokers_HDL</span> <span class="op">-</span> <span class="va">nonsmokers_HDL</span>, B <span class="op">=</span> <span class="fl">1000</span>, conf.int <span class="op">=</span> <span class="fl">0.90</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in smokers_HDL - nonsmokers_HDL: longer object length is not a multiple
of shorter object length</code></pre>
</div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">bootstrap_ci</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Mean      Lower      Upper 
-0.6705120 -1.1510828 -0.1463267 </code></pre>
</div>
</div>
<p>Based on this analysis, on average, <strong>HDL cholesterol levels in non-smokers (2021-2023) are 0.67 mg/dL higher than in smokers (2017-2020), with a 90% confidence interval for the mean difference of -1.15 to -0.15 mg/dL</strong>. Since the CI does not include 0, this difference is considered <strong>statistically signficant</strong> and we can <strong>reject the null hypothesis.</strong></p>
<p>In conclusion, this analysis suggests that there is a difference in HDL cholesterol levels between smokers and non-smokers. However, given how small the difference is, it likely has limited clinical relevance. I imagine there are other clinical factors that may play a bigger role in carcinogenesis.</p>
<p><strong>Analysis B: Is there a meaningful difference in total cholesterol levels in those with and without a family history of cancer?</strong></p>
<p>The <strong>independent variables</strong> I chose to compare for this analysis are total cholesterol levels (LBXTC) between those with and without a family history of cancer (MCQ220). I completed this analysis using NHANES 2021-2023 data.</p>
<p>The <strong>null hypothesis</strong> is that there is no differene in mean total cholesterol levels between those with and without a family history of cancer. The <strong>alternative hypothesis</strong> is that there is a difference in mean total cholesterol levels between those with and without a family history of cancer. I suspect that those with a family history of cancer may have higher total cholesterol levels.</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cholesterol</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/TCHOL_L.xpt"</span><span class="op">)</span></span>
<span><span class="va">fhx</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/MCQ_L.xpt"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cholesterol</span> <span class="op">&lt;-</span> <span class="va">cholesterol</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">LBXTC</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">LBXTC</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fhx</span> <span class="op">&lt;-</span> <span class="va">fhx</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">MCQ220</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">MCQ220</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">MCQ220</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Family_History <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">MCQ220</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Yes"</span>,</span>
<span>    <span class="va">MCQ220</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"No"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cholesterol_fhx</span> <span class="op">&lt;-</span> <span class="va">cholesterol</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">inner_join</span><span class="op">(</span><span class="va">fhx</span>, by <span class="op">=</span> <span class="st">"SEQN"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">cholesterol_fhx</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      SEQN            LBXTC           MCQ220      Family_History    
 Min.   :130378   Min.   : 62.0   Min.   :1.000   Length:5492       
 1st Qu.:133348   1st Qu.:159.0   1st Qu.:2.000   Class :character  
 Median :136402   Median :185.0   Median :2.000   Mode  :character  
 Mean   :136355   Mean   :188.1   Mean   :1.852                     
 3rd Qu.:139312   3rd Qu.:214.0   3rd Qu.:2.000                     
 Max.   :142310   Max.   :438.0   Max.   :2.000                     </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">cholesterol_fhx</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">LBXTC</span>, fill <span class="op">=</span> <span class="va">Family_History</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"identity"</span>, alpha <span class="op">=</span> <span class="fl">0.6</span>, bins <span class="op">=</span> <span class="fl">30</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Histogram of Total Cholesterol by Family History of Cancer"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Total Cholesterol (mg/dL)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Frequency"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"coral"</span>, <span class="st">"lightgreen"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>  </span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cholesterol_fhx</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">LBXTC</span>, color <span class="op">=</span> <span class="va">Family_History</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_qq.html">stat_qq</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_qq.html">stat_qq_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Q-Q Plot of Total Cholesterol"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Theoretical Quantiles"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Sample Quantiles"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Based on the histogram and Q-Q plots, this data is not normally distributed. For that reason, I chose to proceed with a Mann-Whitney U test with the bootstrap procedure to determine if the distributions of the two independent groups differ.</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/">broom</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'kableExtra'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    group_rows</code></pre>
</div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">chol_yes</span> <span class="op">&lt;-</span> <span class="va">cholesterol_fhx</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Family_History</span> <span class="op">==</span> <span class="st">"Yes"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">pull</span><span class="op">(</span><span class="va">LBXTC</span><span class="op">)</span></span>
<span><span class="va">chol_no</span> <span class="op">&lt;-</span> <span class="va">cholesterol_fhx</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Family_History</span> <span class="op">==</span> <span class="st">"No"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">pull</span><span class="op">(</span><span class="va">LBXTC</span><span class="op">)</span></span>
<span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/wilcox.test.html">wilcox.test</a></span><span class="op">(</span><span class="va">chol_yes</span>, <span class="va">chol_no</span>,</span>
<span>                  conf.int <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                  conf.level <span class="op">=</span> <span class="fl">0.90</span><span class="op">)</span></span>
<span><span class="va">tidy_wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">wt</span><span class="op">)</span></span>
<span><span class="va">tidy_wt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">statistic</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p.value</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">conf.low</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">conf.high</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">method</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">alternative</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">-3</td>
<td style="text-align: right;">1822269</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">-6</td>
<td style="text-align: right;">-1</td>
<td style="text-align: left;">Wilcoxon rank sum test with continuity correction</td>
<td style="text-align: left;">two.sided</td>
</tr></tbody>
</table>
</div>
</div>
<p>These results indicate that the <strong>median difference in cholesterol between the two groups is -3 mg/dL</strong>, such that individuals without a family history of cancer had total cholesterol levels 3 mg/dL higher than those with a family history of cancer. The <strong>90% confidence interval for this median difference is between -6 and -1 mg/dL</strong>. It implies statistical significance as it does not include zero. Additionally, the <strong>p-value is 0.05</strong>, which lies right at the threshold of statistical significance.</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">cholesterol_fhx</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Family_History</span>, y <span class="op">=</span> <span class="va">LBXTC</span>, fill <span class="op">=</span> <span class="va">Family_History</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Comparison of Total Cholesterol by Family History of Cancer"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Family History of Cancer"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Total Cholesterol (mg/dL)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"coral"</span>, <span class="st">"lightgreen"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>  </span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>In conclusion, a median difference of 3 mg/dL is small. While it may be statistically significant, I doubt it is clinically significant.</p>
<p><strong>Analysis C: Are there significant differences in total cholesterol levels across different racial/ethnic groups?</strong></p>
<p>The <strong>variables</strong> I chose to compare in this analysis were total cholesterol (LBDHDD) as my outcome across various racial/ethnic groups (RIDRETH3). This data was obtained from the most recent release of NHANES (2021-2023).</p>
<p><strong>I hypothesize that there will be significant differences in total cholesterol levels across racial/ethnic groups due to underlying factors</strong>, primarily related to genetic predisposition and social determinants of health.</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">race</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/DEMO_L.xpt"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">race</span> <span class="op">&lt;-</span> <span class="va">race</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">RIDRETH3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">RIDRETH3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cholesterol_race</span> <span class="op">&lt;-</span> <span class="va">cholesterol_fhx</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">inner_join</span><span class="op">(</span><span class="va">race</span>, by <span class="op">=</span> <span class="st">"SEQN"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    Race_Ethnicity <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>      <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Mexican American"</span>,</span>
<span>      <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Other Hispanic"</span>,</span>
<span>      <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"Non-Hispanic White"</span>,</span>
<span>      <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">~</span> <span class="st">"Non-Hispanic Black"</span>,</span>
<span>      <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">6</span> <span class="op">~</span> <span class="st">"Non-Hispanic Asian"</span>,</span>
<span>      <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">7</span> <span class="op">~</span> <span class="st">"Other Race - Including Multi-Racial"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span>  </span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Race_Ethnicity</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">cholesterol_race</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      SEQN            LBXTC           MCQ220      Family_History    
 Min.   :130378   Min.   : 62.0   Min.   :1.000   Length:5492       
 1st Qu.:133348   1st Qu.:159.0   1st Qu.:2.000   Class :character  
 Median :136402   Median :185.0   Median :2.000   Mode  :character  
 Mean   :136355   Mean   :188.1   Mean   :1.852                     
 3rd Qu.:139312   3rd Qu.:214.0   3rd Qu.:2.000                     
 Max.   :142310   Max.   :438.0   Max.   :2.000                     
    RIDRETH3     Race_Ethnicity    
 Min.   :1.000   Length:5492       
 1st Qu.:3.000   Class :character  
 Median :3.000   Mode  :character  
 Mean   :3.289                     
 3rd Qu.:3.000                     
 Max.   :7.000                     </code></pre>
</div>
</div>
<p>In order to test for overall differences in mean cholesterol levels across race/ethnicity groups, I chose to run an ANOVA using Tukey’s HSD method.</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cholesterol_race</span> <span class="op">&lt;-</span> <span class="va">cholesterol_race</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Race_Ethnicity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">Race_Ethnicity</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Race_Ethnicity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html">droplevels</a></span><span class="op">(</span><span class="va">Race_Ethnicity</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html">anova</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">LBXTC</span> <span class="op">~</span> <span class="va">Race_Ethnicity</span>, data <span class="op">=</span> <span class="va">cholesterol_race</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: LBXTC
                 Df  Sum Sq Mean Sq F value    Pr(&gt;F)    
Race_Ethnicity    5   84220 16844.0  9.3068 7.707e-09 ***
Residuals      5486 9928951  1809.9                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>The ANOVA results demonstrate <strong>high variance in total cholesterol levels between races</strong>, as indicated by an F-value of 9.3. Given that <strong>p&lt;0.001</strong>, these findings suggest that <strong>race/ethnicity influences variability in cholesterol levels</strong>.</p>
<p>The Tukey HSD allows us to determine specific pariwise differences between racial/ethnic groups.</p>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">anova_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aov.html">aov</a></span><span class="op">(</span><span class="va">LBXTC</span> <span class="op">~</span> <span class="va">Race_Ethnicity</span>, data <span class="op">=</span> <span class="va">cholesterol_race</span><span class="op">)</span></span>
<span><span class="va">tukey_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/TukeyHSD.html">TukeyHSD</a></span><span class="op">(</span><span class="va">anova_model</span>, conf.level <span class="op">=</span> <span class="fl">0.90</span><span class="op">)</span></span>
<span><span class="va">tidy_tukey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">tukey_results</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">tidy_tukey</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 7
   term           contrast    null.value estimate conf.low conf.high adj.p.value
   &lt;chr&gt;          &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
 1 Race_Ethnicity Non-Hispan…          0    9.73      1.16   18.3        3.87e-2
 2 Race_Ethnicity Non-Hispan…          0   -7.32    -14.5    -0.0962     9.17e-2
 3 Race_Ethnicity Non-Hispan…          0    3.61     -2.44    9.67       6.35e-1
 4 Race_Ethnicity Other Hisp…          0    2.23     -5.15    9.62       9.71e-1
 5 Race_Ethnicity Other Race…          0    4.52     -3.78   12.8        7.21e-1
 6 Race_Ethnicity Non-Hispan…          0  -17.0     -24.8    -9.32       1.73e-7
 7 Race_Ethnicity Non-Hispan…          0   -6.12    -12.8     0.526      1.62e-1
 8 Race_Ethnicity Other Hisp…          0   -7.50    -15.4     0.380      1.35e-1
 9 Race_Ethnicity Other Race…          0   -5.21    -13.9     3.52       6.35e-1
10 Race_Ethnicity Non-Hispan…          0   10.9       6.15   15.7        5.32e-8
11 Race_Ethnicity Other Hisp…          0    9.55      3.16   15.9        1.53e-3
12 Race_Ethnicity Other Race…          0   11.8       4.42   19.3        5.21e-4
13 Race_Ethnicity Other Hisp…          0   -1.38     -6.41    3.65       9.81e-1
14 Race_Ethnicity Other Race…          0    0.905    -5.38    7.19       9.99e-1
15 Race_Ethnicity Other Race…          0    2.28     -5.29    9.86       9.71e-1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mar.default</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.1</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="va">mar.default</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/TukeyHSD.html">TukeyHSD</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/aov.html">aov</a></span><span class="op">(</span><span class="va">LBXTC</span> <span class="op">~</span> <span class="va">Race_Ethnicity</span>, data <span class="op">=</span> <span class="va">cholesterol_race</span><span class="op">)</span>, conf.level <span class="op">=</span> <span class="fl">0.90</span><span class="op">)</span>, </span>
<span>  las <span class="op">=</span> <span class="fl">2</span>,        </span>
<span>  cex.axis <span class="op">=</span> <span class="fl">0.7</span>  </span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>From this plot, we can see that there are <strong>significant differences in total cholesterol levels between certain racial/ethnic groups</strong>, as indicated by 90% CI that do not cross zero.</p>
<p>Higher cholesterol levels were observed in: 1. Non-Hispanic Asian compared to Mexican American individuals. 2. Non-Hispanic White compared to Non-Hispanic Black individuals. 3. Other Hispanic compared to Non-Hispanic Black and Other compared to Non-Hispanic Black individuals. Lower cholesterol levels were observed in: 5. Non-Hispanic Black compared to Mexican American individuals. 6. Non-Hispanic Black compared to Non-Hispanic Asian individuals.</p>
<p>These findings highlight disparities in total cholesterol between racial/ethnic groups. These likely represent a combination of factors, including genetics, dietary habits, socioeconomic factors, cultural practices, and other social determinants of health.</p>
<p>I think the parallels between groups with higher disparities in total cholesterol and those who experience higher cancer mortality rates for certain cancers based on existing literature are interesting. I strongly believe that underlying socioeconomic factors that impact healthcare access (including preventative care) have profound impacts on the overall health of minority groups.</p>
<p><strong>Analysis D: What is the association between health insurance coverage and cancer diagnosis?</strong></p>
<p>The <strong>variables</strong> I chose to compare in this analysis are health insurance coverage(HIQ210) and cancer diagnosis (MCQ220). <strong>I hypothesize that individuals without insurance coverage are less likely to report a diagnosis of cancer compared to those with insurance</strong> due to diaprities in access to healthcare, resulting in delays in diagnosis.</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cancer</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/MCQ_L.xpt"</span><span class="op">)</span></span>
<span><span class="va">ins</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/HIQ_L.xpt"</span><span class="op">)</span></span>
<span><span class="va">cancer</span> <span class="op">&lt;-</span> <span class="va">cancer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">MCQ010</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">MCQ010</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Cancer_Diagnosis <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">MCQ010</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Yes"</span>,</span>
<span>    <span class="va">MCQ010</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"No"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ins</span> <span class="op">&lt;-</span> <span class="va">ins</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">HIQ011</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">HIQ011</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Insurance <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">HIQ011</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Yes"</span>,</span>
<span>    <span class="va">HIQ011</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"No"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cancer_ins</span> <span class="op">&lt;-</span> <span class="fu">inner_join</span><span class="op">(</span><span class="va">cancer</span>, <span class="va">ins</span>, by <span class="op">=</span> <span class="st">"SEQN"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I wanted to make a 2x2 table to show the relationship between cancer diagnosis and insurance status.</p>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">cancer_ins</span><span class="op">$</span><span class="va">Cancer_Diagnosis</span>, <span class="va">cancer_ins</span><span class="op">$</span><span class="va">Insurance</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     
        No  Yes
  No   733 8998
  Yes  126 1811</code></pre>
</div>
</div>
<p>In general, it appears that most who have a cancer diagnosis have health insurance. It also appears that most who do not have a cancer diagnosis also have insurance.</p>
<div class="cell">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">risk_insured</span> <span class="op">&lt;-</span> <span class="fl">1811</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1811</span> <span class="op">+</span> <span class="fl">8998</span><span class="op">)</span>  </span>
<span><span class="va">risk_uninsured</span> <span class="op">&lt;-</span> <span class="fl">126</span> <span class="op">/</span> <span class="op">(</span><span class="fl">126</span> <span class="op">+</span> <span class="fl">733</span><span class="op">)</span>  </span>
<span><span class="va">RR</span> <span class="op">&lt;-</span> <span class="va">risk_insured</span> <span class="op">/</span> <span class="va">risk_uninsured</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">RR</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.142235</code></pre>
</div>
</div>
<p>Individuals with insurance have a 14% greater <strong>relative risk</strong> of reporting a cancer diagnosis compared to uninsured individuals.</p>
<div class="cell">
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">1811</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">126</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fl">8998</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fl">733</span></span>
<span><span class="va">OR</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">a</span> <span class="op">*</span> <span class="va">d</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">b</span> <span class="op">*</span> <span class="va">c</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">OR</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.170862</code></pre>
</div>
</div>
<p>The <strong>odds</strong> of being diagnosed with cancer are also 17% higher for insured individuals compared to uninsured individuals.</p>
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">RD</span> <span class="op">&lt;-</span> <span class="va">risk_insured</span> <span class="op">-</span> <span class="va">risk_uninsured</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">RD</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02086338</code></pre>
</div>
</div>
<p>A <strong>risk difference</strong> of 0.02 indicates that there is a 2.0% higher risk of cancer diagnosis for insured individuals than uninsured individuals.</p>
<p>In conclusion, these findings suggest that <strong>insured individuals are slightly more likely to report a cancer diagnosis compared to uninsured individuals</strong>. This can likely be attributed to the role that insurance plays in facilitating access to diagnostic services and preventative care, which improve the early detection of cancer. These findings again highlight the importance of addressing disparities to care in cancer.</p>
</section><section id="study-2" class="level2"><h2 class="anchored" data-anchor-id="study-2">Study 2</h2>
<p>The <strong>research question</strong> I will be assessing in Study 2 is: <strong>How effectively does race/ethnicity predict total cholesterol levels? What happens when we adjust for insurance status, smoking status, and family history of cancer?</strong></p>
<p>The <strong>outcome variable</strong> is total cholesterol (mg/dL), and <strong>race/ethnicity</strong> is the key predictor. Other predictors for this outcome include insurance status, smoking status, and family history of cancer. All data was extracted from the most recent release of NHANES.</p>
<p>In order to begin the analysis, I first loaded and cleaned the data:</p>
<div class="cell">
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cholesterol</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/TCHOL_L.xpt"</span><span class="op">)</span></span>
<span><span class="va">fhx</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/MCQ_L.xpt"</span><span class="op">)</span></span>
<span><span class="va">race</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/DEMO_L.xpt"</span><span class="op">)</span></span>
<span><span class="va">ins</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/HIQ_L.xpt"</span><span class="op">)</span></span>
<span><span class="va">smoking</span> <span class="op">&lt;-</span> <span class="fu">read_xpt</span><span class="op">(</span><span class="st">"/Users/trishalal/Downloads/SMQ_L.xpt"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cholesterol</span> <span class="op">&lt;-</span> <span class="va">cholesterol</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">LBXTC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">LBXTC</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fhx</span> <span class="op">&lt;-</span> <span class="va">fhx</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">MCQ220</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Family_History <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">MCQ220</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Yes"</span>,</span>
<span>    <span class="va">MCQ220</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"No"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">MCQ220</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">race</span> <span class="op">&lt;-</span> <span class="va">race</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">RIDRETH3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Race_Ethnicity <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Mexican American"</span>,</span>
<span>    <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Other Hispanic"</span>,</span>
<span>    <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"Non-Hispanic White"</span>,</span>
<span>    <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">~</span> <span class="st">"Non-Hispanic Black"</span>,</span>
<span>    <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">6</span> <span class="op">~</span> <span class="st">"Non-Hispanic Asian"</span>,</span>
<span>    <span class="va">RIDRETH3</span> <span class="op">==</span> <span class="fl">7</span> <span class="op">~</span> <span class="st">"Other Race/Multiracial"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">RIDRETH3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Race_Ethnicity</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ins</span> <span class="op">&lt;-</span> <span class="va">ins</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">HIQ011</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Insurance <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">HIQ011</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Yes"</span>,</span>
<span>    <span class="va">HIQ011</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"No"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">HIQ011</span><span class="op">)</span></span>
<span></span>
<span><span class="va">smoking</span> <span class="op">&lt;-</span> <span class="va">smoking</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">SMQ020</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Smoking_Status <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">SMQ020</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Yes"</span>,</span>
<span>    <span class="va">SMQ020</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"No"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">SMQ020</span><span class="op">)</span></span>
<span></span>
<span><span class="va">study2_data</span> <span class="op">&lt;-</span> <span class="va">cholesterol</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">inner_join</span><span class="op">(</span><span class="va">race</span>, by <span class="op">=</span> <span class="st">"SEQN"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">inner_join</span><span class="op">(</span><span class="va">ins</span>, by <span class="op">=</span> <span class="st">"SEQN"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">inner_join</span><span class="op">(</span><span class="va">smoking</span>, by <span class="op">=</span> <span class="st">"SEQN"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">inner_join</span><span class="op">(</span><span class="va">fhx</span>, by <span class="op">=</span> <span class="st">"SEQN"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">study2_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,391 × 6
     SEQN LBXTC Race_Ethnicity     Insurance Smoking_Status Family_History
    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;          &lt;chr&gt;         
 1 130378   264 Non-Hispanic Asian Yes       Yes            No            
 2 130379   214 Non-Hispanic White Yes       Yes            Yes           
 3 130380   187 Other Hispanic     Yes       No             No            
 4 130386   183 Mexican American   Yes       Yes            No            
 5 130387   203 Non-Hispanic White Yes       No             Yes           
 6 130390   159 Non-Hispanic White No        No             No            
 7 130391   157 Non-Hispanic White Yes       Yes            No            
 8 130392   191 Non-Hispanic White Yes       No             Yes           
 9 130393   179 Non-Hispanic White Yes       No             No            
10 130394   183 Non-Hispanic White Yes       No             No            
# ℹ 6,381 more rows</code></pre>
</div>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">study2_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      SEQN            LBXTC       Race_Ethnicity      Insurance        
 Min.   :130378   Min.   : 62.0   Length:6391        Length:6391       
 1st Qu.:133321   1st Qu.:152.0   Class :character   Class :character  
 Median :136376   Median :180.0   Mode  :character   Mode  :character  
 Mean   :136330   Mean   :183.3                                        
 3rd Qu.:139291   3rd Qu.:209.0                                        
 Max.   :142310   Max.   :438.0                                        
 Smoking_Status     Family_History    
 Length:6391        Length:6391       
 Class :character   Class :character  
 Mode  :character   Mode  :character  
                                      
                                      
                                      </code></pre>
</div>
</div>
<p>Next, I wanted to evaluate the missingness of this dataset.</p>
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/njtierney/naniar">naniar</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://naniar.njtierney.com/reference/gg_miss_var.html">gg_miss_var</a></span><span class="op">(</span><span class="va">study2_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://naniar.njtierney.com/reference/miss_var_summary.html">miss_var_summary</a></span><span class="op">(</span><span class="va">study2_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  variable       n_miss pct_miss
  &lt;chr&gt;           &lt;int&gt;    &lt;num&gt;
1 Family_History    899   14.1  
2 Smoking_Status    683   10.7  
3 Insurance          13    0.203
4 SEQN                0    0    
5 LBXTC               0    0    
6 Race_Ethnicity      0    0    </code></pre>
</div>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://naniar.njtierney.com/reference/miss_case_table.html">miss_case_table</a></span><span class="op">(</span><span class="va">study2_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  n_miss_in_case n_cases pct_cases
           &lt;int&gt;   &lt;int&gt;     &lt;dbl&gt;
1              0    5479   85.7   
2              1     232    3.63  
3              2     677   10.6   
4              3       3    0.0469</code></pre>
</div>
</div>
<p>This tells us that there are <strong>5479 complete cases, which makes up 85% of cases in total</strong>. 683 of the missing variables were data points related to family history of cancer, 683 were related to smoking status, and 13 were related to insurance.</p>
<p>I chose to manage the missing data by completing necessary imputations in variables other than the key predictor and outcome. <strong>Missing values were imputed using the mice package with the pmm method.</strong></p>
<div class="cell">
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/amices/mice">mice</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'mice'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:stats':

    filter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    cbind, rbind</code></pre>
</div>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">imputation_data</span> <span class="op">&lt;-</span> <span class="va">study2_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">Family_History</span>, <span class="va">Insurance</span>, <span class="va">Smoking_Status</span><span class="op">)</span></span>
<span><span class="va">imputation_data</span> <span class="op">&lt;-</span> <span class="va">imputation_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    Family_History <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Family_History</span><span class="op">)</span>,</span>
<span>    Insurance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Insurance</span><span class="op">)</span>,</span>
<span>    Smoking_Status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Smoking_Status</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">imputed_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://amices.org/mice/reference/mice.html">mice</a></span><span class="op">(</span><span class="va">imputation_data</span>, m <span class="op">=</span> <span class="fl">1</span>, method <span class="op">=</span> <span class="st">"pmm"</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 iter imp variable
  1   1  Family_History  Insurance  Smoking_Status
  2   1  Family_History  Insurance  Smoking_Status
  3   1  Family_History  Insurance  Smoking_Status
  4   1  Family_History  Insurance  Smoking_Status
  5   1  Family_History  Insurance  Smoking_Status</code></pre>
</div>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">imputed_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Class: mids
Number of multiple imputations:  1 
Imputation methods:
Family_History      Insurance Smoking_Status 
         "pmm"          "pmm"          "pmm" 
PredictorMatrix:
               Family_History Insurance Smoking_Status
Family_History              0         1              1
Insurance                   1         0              1
Smoking_Status              1         1              0</code></pre>
</div>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">imputed_complete</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/complete.html">complete</a></span><span class="op">(</span><span class="va">imputed_data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://naniar.njtierney.com/reference/gg_miss_var.html">gg_miss_var</a></span><span class="op">(</span><span class="va">imputed_complete</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">study2_data_imputed</span> <span class="op">&lt;-</span> <span class="va">study2_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SEQN</span>, <span class="va">LBXTC</span>, <span class="va">Race_Ethnicity</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">bind_cols</span><span class="op">(</span><span class="va">imputed_complete</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://naniar.njtierney.com/reference/gg_miss_var.html">gg_miss_var</a></span><span class="op">(</span><span class="va">study2_data_imputed</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://naniar.njtierney.com/reference/miss_var_summary.html">miss_var_summary</a></span><span class="op">(</span><span class="va">study2_data_imputed</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  variable       n_miss pct_miss
  &lt;chr&gt;           &lt;int&gt;    &lt;num&gt;
1 SEQN                0        0
2 LBXTC               0        0
3 Race_Ethnicity      0        0
4 Family_History      0        0
5 Insurance           0        0
6 Smoking_Status      0        0</code></pre>
</div>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://naniar.njtierney.com/reference/prop-miss-complete-case.html">prop_complete_case</a></span><span class="op">(</span><span class="va">study2_data_imputed</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://naniar.njtierney.com/reference/miss_case_table.html">miss_case_table</a></span><span class="op">(</span><span class="va">study2_data_imputed</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  n_miss_in_case n_cases pct_cases
           &lt;int&gt;   &lt;int&gt;     &lt;dbl&gt;
1              0    6391       100</code></pre>
</div>
</div>
<p>Now that the single imputation is complete for each predictor other than the key predictor, I confirmed that there are no longer any missing variables. <strong>The total number of cases in our clean dataset is ultimately 6391.</strong> This is a numerical summary of the data:</p>
<div class="cell">
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">study2_data_imputed</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      SEQN            LBXTC       Race_Ethnicity     Family_History Insurance 
 Min.   :130378   Min.   : 62.0   Length:6391        No :5297       No : 508  
 1st Qu.:133321   1st Qu.:152.0   Class :character   Yes:1094       Yes:5883  
 Median :136376   Median :180.0   Mode  :character                            
 Mean   :136330   Mean   :183.3                                               
 3rd Qu.:139291   3rd Qu.:209.0                                               
 Max.   :142310   Max.   :438.0                                               
 Smoking_Status
 No :4025      
 Yes:2366      
               
               
               
               </code></pre>
</div>
</div>
<p>Next, I <strong>partitioned the clean data into a model development sample containing 75% of the data and a model testing sample containing the remaining 25%.</strong></p>
<div class="cell">
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">training_sample</span> <span class="op">&lt;-</span> <span class="va">study2_data_imputed</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">slice_sample</span><span class="op">(</span>prop <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span>
<span><span class="va">test_sample</span> <span class="op">&lt;-</span> <span class="fu">anti_join</span><span class="op">(</span><span class="va">study2_data_imputed</span>, <span class="va">training_sample</span>, by <span class="op">=</span> <span class="st">"SEQN"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">training_sample</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4793</code></pre>
</div>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">test_sample</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1598</code></pre>
</div>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">study2_data_imputed</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6391</code></pre>
</div>
</div>
<p>I wanted to visualize the outcome, total cholesterol, before investigating potential transformations for the purpose of fitting regression models.</p>
<div class="cell">
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">training_sample</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">LBXTC</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">10</span>, fill <span class="op">=</span> <span class="st">"coral"</span>, col <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> </span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">training_sample</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">LBXTC</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_qq.html">geom_qq</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"coral"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_qq.html">geom_qq_line</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span></span>
<span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">training_sample</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="va">LBXTC</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"coral"</span>, alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"coral"</span>, width <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>               outlier.color <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span> <span class="op">-</span> <span class="va">p3</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://patchwork.data-imaginist.com/reference/plot_layout.html">plot_layout</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">1</span>, height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://patchwork.data-imaginist.com/reference/plot_annotation.html">plot_annotation</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Total Cholesterol (mg/dL)"</span>,</span>
<span>                  subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Model Development Sample:"</span>,</span>
<span>                                    <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">training_sample</span><span class="op">)</span>,</span>
<span>                                    <span class="st">"1598 cases"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Based on this visualizaiton, I realized our data is right-skewed. Potential transformations that could be suitable are logarithmic or Box-Cox.</p>
<div class="cell">
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">study2_data_log</span> <span class="op">&lt;-</span> <span class="va">training_sample</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>log_LBXTC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">LBXTC</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">study2_data_log</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">log_LBXTC</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">0.1</span>, fill <span class="op">=</span> <span class="st">"coral"</span>, col <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Log Transformation of Total Cholesterol"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Log(Cholesterol)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Frequency"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-forge.r-project.org/projects/car/">car</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: carData</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'car'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    recode</code></pre>
</div>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mod_0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">LBXTC</span> <span class="op">~</span> <span class="fl">1</span>, data <span class="op">=</span> <span class="va">training_sample</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/car/man/boxCox.html">boxCox</a></span><span class="op">(</span><span class="va">mod_0</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/powerTransform.html">powerTransform</a></span><span class="op">(</span><span class="va">mod_0</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>bcPower Transformation to Normality 
   Est Power Rounded Pwr Wald Lwr Bnd Wald Upr Bnd
Y1    0.2036         0.2        0.109       0.2982

Likelihood ratio test that transformation parameter is equal to 0
 (log transformation)
                           LRT df       pval
LR test, lambda = (0) 17.83628  1 2.4075e-05

Likelihood ratio test that no transformation is needed
                           LRT df       pval
LR test, lambda = (1) 270.9899  1 &lt; 2.22e-16</code></pre>
</div>
</div>
<p>After evaluating these two separate transformations, I chose to proceed with the <strong>logarithmic</strong> transformation of our cholesterol data because the resulting histogram nearly follows a normal distribution compared to the original data. I think this is also sufficient since the lamda from the Box-Cox transformation is nearly zero.</p>
<p>This is the summary of the full model with all predictors:</p>
<div class="cell">
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">full_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">LBXTC</span><span class="op">)</span> <span class="op">~</span> <span class="va">Race_Ethnicity</span> <span class="op">+</span> <span class="va">Family_History</span> <span class="op">+</span> <span class="va">Smoking_Status</span> <span class="op">+</span> <span class="va">Insurance</span>, data <span class="op">=</span> <span class="va">training_sample</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">full_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = log(LBXTC) ~ Race_Ethnicity + Family_History + Smoking_Status + 
    Insurance, data = training_sample)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.04479 -0.15488  0.00731  0.15400  0.84227 

Coefficients:
                                      Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                           5.178244   0.015666 330.536  &lt; 2e-16 ***
Race_EthnicityNon-Hispanic Asian      0.085789   0.018965   4.523 6.23e-06 ***
Race_EthnicityNon-Hispanic Black     -0.016624   0.015763  -1.055  0.29165    
Race_EthnicityNon-Hispanic White      0.061709   0.013288   4.644 3.51e-06 ***
Race_EthnicityOther Hispanic          0.015451   0.015853   0.975  0.32978    
Race_EthnicityOther Race/Multiracial  0.036320   0.018081   2.009  0.04461 *  
Family_HistoryYes                    -0.046020   0.009109  -5.052 4.53e-07 ***
Smoking_StatusYes                     0.012718   0.007105   1.790  0.07353 .  
InsuranceYes                         -0.034487   0.012832  -2.688  0.00722 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2336 on 4784 degrees of freedom
Multiple R-squared:  0.02169,   Adjusted R-squared:  0.02005 
F-statistic: 13.26 on 8 and 4784 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>This is a summary of the subset model, which includes only the key predictor (race/ethnicity):</p>
<div class="cell">
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">subset_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">LBXTC</span><span class="op">)</span> <span class="op">~</span> <span class="va">Race_Ethnicity</span>, data <span class="op">=</span> <span class="va">training_sample</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">subset_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = log(LBXTC) ~ Race_Ethnicity, data = training_sample)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.03795 -0.15262  0.00701  0.15411  0.87974 

Coefficients:
                                     Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                           5.14958    0.01219 422.454  &lt; 2e-16 ***
Race_EthnicityNon-Hispanic Asian      0.08008    0.01887   4.244 2.24e-05 ***
Race_EthnicityNon-Hispanic Black     -0.01978    0.01566  -1.263   0.2068    
Race_EthnicityNon-Hispanic White      0.05290    0.01299   4.073 4.71e-05 ***
Race_EthnicityOther Hispanic          0.01551    0.01590   0.975   0.3294    
Race_EthnicityOther Race/Multiracial  0.03037    0.01787   1.700   0.0892 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.2345 on 4787 degrees of freedom
Multiple R-squared:  0.01414,   Adjusted R-squared:  0.01312 
F-statistic: 13.74 on 5 and 4787 DF,  p-value: 2.407e-13</code></pre>
</div>
</div>
<p>This is a comparison of the two models:</p>
<div class="cell">
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/datalorax/equatiomatic">equatiomatic</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">tidy_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">full_model</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span>, conf.level <span class="op">=</span> <span class="fl">0.90</span><span class="op">)</span></span>
<span><span class="va">tidy_full</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">term</span>, <span class="va">estimate</span>, <span class="va">std.error</span>, <span class="va">p.value</span>,</span>
<span>         <span class="va">conf.low</span>, <span class="va">conf.high</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 44%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 12%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">p.value</th>
<th style="text-align: right;">conf.low</th>
<th style="text-align: right;">conf.high</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">5.1782</td>
<td style="text-align: right;">0.0157</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">5.1525</td>
<td style="text-align: right;">5.2040</td>
</tr>
<tr class="even">
<td style="text-align: left;">Race_EthnicityNon-Hispanic Asian</td>
<td style="text-align: right;">0.0858</td>
<td style="text-align: right;">0.0190</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.0546</td>
<td style="text-align: right;">0.1170</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Race_EthnicityNon-Hispanic Black</td>
<td style="text-align: right;">-0.0166</td>
<td style="text-align: right;">0.0158</td>
<td style="text-align: right;">0.2916</td>
<td style="text-align: right;">-0.0426</td>
<td style="text-align: right;">0.0093</td>
</tr>
<tr class="even">
<td style="text-align: left;">Race_EthnicityNon-Hispanic White</td>
<td style="text-align: right;">0.0617</td>
<td style="text-align: right;">0.0133</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.0398</td>
<td style="text-align: right;">0.0836</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Race_EthnicityOther Hispanic</td>
<td style="text-align: right;">0.0155</td>
<td style="text-align: right;">0.0159</td>
<td style="text-align: right;">0.3298</td>
<td style="text-align: right;">-0.0106</td>
<td style="text-align: right;">0.0415</td>
</tr>
<tr class="even">
<td style="text-align: left;">Race_EthnicityOther Race/Multiracial</td>
<td style="text-align: right;">0.0363</td>
<td style="text-align: right;">0.0181</td>
<td style="text-align: right;">0.0446</td>
<td style="text-align: right;">0.0066</td>
<td style="text-align: right;">0.0661</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Family_HistoryYes</td>
<td style="text-align: right;">-0.0460</td>
<td style="text-align: right;">0.0091</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">-0.0610</td>
<td style="text-align: right;">-0.0310</td>
</tr>
<tr class="even">
<td style="text-align: left;">Smoking_StatusYes</td>
<td style="text-align: right;">0.0127</td>
<td style="text-align: right;">0.0071</td>
<td style="text-align: right;">0.0735</td>
<td style="text-align: right;">0.0010</td>
<td style="text-align: right;">0.0244</td>
</tr>
<tr class="odd">
<td style="text-align: left;">InsuranceYes</td>
<td style="text-align: right;">-0.0345</td>
<td style="text-align: right;">0.0128</td>
<td style="text-align: right;">0.0072</td>
<td style="text-align: right;">-0.0556</td>
<td style="text-align: right;">-0.0134</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://datalorax.github.io/equatiomatic/reference/extract_eq.html">extract_eq</a></span><span class="op">(</span><span class="va">full_model</span>, use_coefs <span class="op">=</span> <span class="cn">TRUE</span>, coef_digits <span class="op">=</span> <span class="fl">4</span>,</span>
<span>           ital_vars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><span class="math display">\[
\widehat{log(LBXTC)} = 5.1782 + 0.0858(Race\_Ethnicity_{Non-Hispanic\ Asian}) - 0.0166(Race\_Ethnicity_{Non-Hispanic\ Black}) + 0.0617(Race\_Ethnicity_{Non-Hispanic\ White}) + 0.0155(Race\_Ethnicity_{Other\ Hispanic}) + 0.0363(Race\_Ethnicity_{Other\ Race/Multiracial}) - 0.046(Family\_History_{Yes}) + 0.0127(Smoking\_Status_{Yes}) - 0.0345(Insurance_{Yes})
\]</span></p>
</div>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://generics.r-lib.org/reference/glance.html">glance</a></span><span class="op">(</span><span class="va">full_model</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"full model"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">name</span>, <span class="va">r.squared</span>, <span class="va">adj.r.squared</span>,</span>
<span>         <span class="va">sigma</span>, <span class="va">AIC</span>, <span class="va">BIC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: right;">r.squared</th>
<th style="text-align: right;">adj.r.squared</th>
<th style="text-align: right;">sigma</th>
<th style="text-align: right;">AIC</th>
<th style="text-align: right;">BIC</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">full model</td>
<td style="text-align: right;">0.022</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.234</td>
<td style="text-align: right;">-325</td>
<td style="text-align: right;">-260</td>
</tr></tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tidy_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">subset_model</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span>, conf.level <span class="op">=</span> <span class="fl">0.90</span><span class="op">)</span></span>
<span><span class="va">tidy_subset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">term</span>, <span class="va">estimate</span>, <span class="va">std.error</span>, <span class="va">p.value</span>,</span>
<span>         <span class="va">conf.low</span>, <span class="va">conf.high</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 44%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 12%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">p.value</th>
<th style="text-align: right;">conf.low</th>
<th style="text-align: right;">conf.high</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">5.1496</td>
<td style="text-align: right;">0.0122</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">5.1295</td>
<td style="text-align: right;">5.1696</td>
</tr>
<tr class="even">
<td style="text-align: left;">Race_EthnicityNon-Hispanic Asian</td>
<td style="text-align: right;">0.0801</td>
<td style="text-align: right;">0.0189</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.0490</td>
<td style="text-align: right;">0.1111</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Race_EthnicityNon-Hispanic Black</td>
<td style="text-align: right;">-0.0198</td>
<td style="text-align: right;">0.0157</td>
<td style="text-align: right;">0.2068</td>
<td style="text-align: right;">-0.0455</td>
<td style="text-align: right;">0.0060</td>
</tr>
<tr class="even">
<td style="text-align: left;">Race_EthnicityNon-Hispanic White</td>
<td style="text-align: right;">0.0529</td>
<td style="text-align: right;">0.0130</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.0315</td>
<td style="text-align: right;">0.0743</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Race_EthnicityOther Hispanic</td>
<td style="text-align: right;">0.0155</td>
<td style="text-align: right;">0.0159</td>
<td style="text-align: right;">0.3294</td>
<td style="text-align: right;">-0.0106</td>
<td style="text-align: right;">0.0417</td>
</tr>
<tr class="even">
<td style="text-align: left;">Race_EthnicityOther Race/Multiracial</td>
<td style="text-align: right;">0.0304</td>
<td style="text-align: right;">0.0179</td>
<td style="text-align: right;">0.0892</td>
<td style="text-align: right;">0.0010</td>
<td style="text-align: right;">0.0598</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://datalorax.github.io/equatiomatic/reference/extract_eq.html">extract_eq</a></span><span class="op">(</span><span class="va">subset_model</span>, use_coefs <span class="op">=</span> <span class="cn">TRUE</span>, coef_digits <span class="op">=</span> <span class="fl">4</span>,</span>
<span>           ital_vars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><span class="math display">\[
\widehat{log(LBXTC)} = 5.1496 + 0.0801(Race\_Ethnicity_{Non-Hispanic\ Asian}) - 0.0198(Race\_Ethnicity_{Non-Hispanic\ Black}) + 0.0529(Race\_Ethnicity_{Non-Hispanic\ White}) + 0.0155(Race\_Ethnicity_{Other\ Hispanic}) + 0.0304(Race\_Ethnicity_{Other\ Race/Multiracial})
\]</span></p>
</div>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://generics.r-lib.org/reference/glance.html">glance</a></span><span class="op">(</span><span class="va">subset_model</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"subset model"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">name</span>, <span class="va">r.squared</span>, <span class="va">adj.r.squared</span>,</span>
<span>         <span class="va">sigma</span>, <span class="va">AIC</span>, <span class="va">BIC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: right;">r.squared</th>
<th style="text-align: right;">adj.r.squared</th>
<th style="text-align: right;">sigma</th>
<th style="text-align: right;">AIC</th>
<th style="text-align: right;">BIC</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">subset model</td>
<td style="text-align: right;">0.014</td>
<td style="text-align: right;">0.013</td>
<td style="text-align: right;">0.234</td>
<td style="text-align: right;">-294</td>
<td style="text-align: right;">-248</td>
</tr></tbody>
</table>
</div>
</div>
<p><strong>In-sample assesment:</strong> Based on these model summaries, the full model (R-squared = 0.22) explains slightly more variablity in the outcome compared to the subset (R-squared = 0.013). The full model also has better AIC and BIC scores, indicating that it is a better fit for our model development sample compared to the subset model.</p>
<p><strong>Holdout-sample assessment:</strong> In order to assess the predictive quality of the models, I ran some tests in the training (holdout) sample.</p>
<div class="cell">
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">holdout_sample</span> <span class="op">&lt;-</span> <span class="va">test_sample</span> </span>
<span></span>
<span><span class="va">holdout_sample</span><span class="op">$</span><span class="va">pred_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">full_model</span>, newdata <span class="op">=</span> <span class="va">holdout_sample</span><span class="op">)</span></span>
<span><span class="va">holdout_sample</span><span class="op">$</span><span class="va">pred_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">subset_model</span>, newdata <span class="op">=</span> <span class="va">holdout_sample</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First, I calculated the RMSE (Root Mean Square Deviation) and MAE (Mean Absolute Error) of both models.</p>
<div class="cell">
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mfrasco/Metrics">Metrics</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">rmse_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Metrics/man/rmse.html">rmse</a></span><span class="op">(</span><span class="va">holdout_sample</span><span class="op">$</span><span class="va">LBXTC</span>, <span class="va">holdout_sample</span><span class="op">$</span><span class="va">pred_full</span><span class="op">)</span></span>
<span><span class="va">mae_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Metrics/man/mae.html">mae</a></span><span class="op">(</span><span class="va">holdout_sample</span><span class="op">$</span><span class="va">LBXTC</span>, <span class="va">holdout_sample</span><span class="op">$</span><span class="va">pred_full</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rmse_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Metrics/man/rmse.html">rmse</a></span><span class="op">(</span><span class="va">holdout_sample</span><span class="op">$</span><span class="va">LBXTC</span>, <span class="va">holdout_sample</span><span class="op">$</span><span class="va">pred_subset</span><span class="op">)</span></span>
<span><span class="va">mae_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Metrics/man/mae.html">mae</a></span><span class="op">(</span><span class="va">holdout_sample</span><span class="op">$</span><span class="va">LBXTC</span>, <span class="va">holdout_sample</span><span class="op">$</span><span class="va">pred_subset</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Full Model - RMSE:"</span>, <span class="va">rmse_full</span>, <span class="st">"MAE:"</span>, <span class="va">mae_full</span>, <span class="st">"\n"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Full Model - RMSE: 181.7983 MAE: 177.1574 </code></pre>
</div>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Subset Model - RMSE:"</span>, <span class="va">rmse_subset</span>, <span class="st">"MAE:"</span>, <span class="va">mae_subset</span>, <span class="st">"\n"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Subset Model - RMSE: 181.7981 MAE: 177.1567 </code></pre>
</div>
</div>
<p>Both models have nearly identical RMSE and MAE. These values suggest that the models have poor predictive performance in terms of detecting precise outcomes. Interestingly, however, the subset model achieves the ssame predictive performance despite including only the key predictor.</p>
<p>Next, I created residuals and calibration plots:</p>
<div class="cell">
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">holdout_sample</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pred_full</span>, y <span class="op">=</span> <span class="va">LBXTC</span> <span class="op">-</span> <span class="va">pred_full</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Residuals vs Fitted (Full Model)"</span>, x <span class="op">=</span> <span class="st">"Predicted"</span>, y <span class="op">=</span> <span class="st">"Residuals"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">holdout_sample</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pred_full</span>, y <span class="op">=</span> <span class="va">LBXTC</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_abline</a></span><span class="op">(</span>slope <span class="op">=</span> <span class="fl">1</span>, intercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Calibration Plot (Full Model)"</span>, x <span class="op">=</span> <span class="st">"Predicted"</span>, y <span class="op">=</span> <span class="st">"Observed"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The residuals plot showed uneven distribution of the residuals, indicating that there is evidence of heteroscedasticity in both models. The calibration plot showed that predicted values are close to observed values. However, clustering suggests that our models have limited predictive power.</p>
<p>The bottom line is that <strong>both models have nearly identical predictive performance and quality.</strong> Given that information, I prefer the <strong>subset model</strong> because it is simpler, yet still has similar performance metrics as the full model. Despite the AIC and BIC being slightly better in the full model, I believe that prioritizing parsimony would ensure that our model is not overly complex for minimal additional benefit when it comes to practical applications.</p>
<p>As a reminder, the research question we tried to answer is: <strong>How effectively does race/ethnicity predict total cholesterol levels? What happens when we adjust for insurance status, smoking status, and family history of cancer?</strong></p>
<p>Based on both models, <strong>race/ethnicity do contribute to differences in total cholesterol levels.</strong> For example, when evaluating the log-transformed subset model, certain groups have higher predicted total cholesterol levels, such as Non-Hispanic Asians and non-Hispanic White, compared to the reference group (Mexican-Americans). <strong>The effect size of these is small</strong>, however.</p>
<p>When we adjust for other predictors like insurance status, smoking status, and family history, the predictive power of the model improves only slightly, as discussed previously.</p>
<p>There are several limitations to be discussed. Firstly, the data obtained from NHANES may not represent the general population. Certain groups may be over- or undersampled, which is important to note when looking at race/ethnicity in particular. Additionally, both models have low R-squared values, which means that only a small proportion of the variance in cholesterol levels can be explained by the predictors we are evaluating in this study. Finally, there are unmeasured variables that could have confounded the observed relationship between the predictors and total cholesterol levels. These include dietary habits, physical activity, and genetics.</p>
<p>Next steps involve adding these other known risk factors to create a more robust analysis. It could also be more helpful to use a larger, more diverse dataset to improve the external validity of this study.</p>
</section><section id="reflection" class="level2"><h2 class="anchored" data-anchor-id="reflection">Reflection</h2>
<p>Building this blog and dashboard was not an easy feat! It felt overwhelming at points, especially in trying to create a cohesive narrative. It was laborious but rewarding. I learned how to run a variety of statistical tests and create useful visualizations that I can apply to my personal research interests separately. I especially valued the opportunity to learn how to manage missingness, which will be helpful when using large datasets.</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p><span class="faux-block">© 2023 Marvin Schmitt CC BY-SA 4.0</span></p>
</div>   
    <div class="nav-footer-center">
<p><span class="faux-block"><a href="https://www.marvinschmitt.com/blog/website-tutorial-quarto/">View the tutorial for this template!</a></span></p>
</div>
    <div class="nav-footer-right">
<p><span class="faux-block"><a href="https://github.com/marvinschmitt/quarto-website-template/">View source on GitHub</a></span></p>
</div>
  </div>
</footer>


</body></html>